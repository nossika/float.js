"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=function(){function t(t,e){var i=[],n=!0,o=!1,s=void 0;try{for(var a,r=t[Symbol.iterator]();!(n=(a=r.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,s=t}finally{try{!n&&r.return&&r.return()}finally{if(o)throw s}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){var e="object"===("undefined"==typeof self?"undefined":_typeof(self))&&self.self===self&&self||"object"===("undefined"==typeof global?"undefined":_typeof(global))&&global.global===global&&global;"function"==typeof define&&define.amd?define([],function(){e.Float=t()}):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t():e.Float=t()}(function(){function t(e,i){for(var n in i)i[n]instanceof Object?(e[n]=e[n]instanceof Object?e[n]:"[object Array]"===Object.prototype.toString.call(i[n])?[]:{},t(e[n],i[n])):e[n]=i[n]}function e(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t[0]+Math.floor(Math.random()*((t[1]-t[0])*e+1))/e}var i=function t(e){var i=e.x,n=void 0===i?0:i,o=e.y,s=void 0===o?0:o,a=e.xV,r=void 0===a?0:a,c=e.yV,f=void 0===c?0:c,l=e.r,d=void 0===l?0:l;_classCallCheck(this,t),this.x=n,this.y=s,this.xV=r,this.yV=f,this.r=d};return function(){function n(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,n),this._ctx=e.getContext("2d"),this._mouseDot=null,this._dotList=new Set,this._config=Object.seal({clickDots:3,maxDots:20,createInterval:500,dotRadius:[.3,1.5],dotSpeedRange:[1,6],dotLinkDistance:100,mousemoveEvent:!0,clickEvent:!0,borderExtend:30,style:Object.seal({line:{r:255,g:255,b:255},width:.6,dot:{r:255,g:255,b:255,a:1}})}),t(this._config,i),this.setSize(),this.bindEvent(),this.autoAddDot(this._config.maxDots),this.suspend(),this.resume()}return _createClass(n,[{key:"bindEvent",value:function(){var t=this,e=[];if(this._config.clickEvent&&e.push("click"),this._config.mousemoveEvent&&e.push("mousemove","mouseleave"),this._events)for(var i in this._events)this._ctx.canvas.removeEventListener(i,this._events[i]);this._events={},e.forEach(function(e){t._events[e]=t[e].bind(t),t._ctx.canvas.addEventListener(e,t._events[e])})}},{key:"mousemove",value:function(t){var e=[t.offsetX,t.offsetY],n=e[0],o=e[1];if(!this._mouseDot)return this._mouseDot=new i({x:n,y:o}),void this._dotList.add(this._mouseDot);this._mouseDot.x=n,this._mouseDot.y=o}},{key:"mouseleave",value:function(t){this._dotList.delete(this._mouseDot),this._mouseDot=null}},{key:"click",value:function(t){for(var n=[t.offsetX,t.offsetY],o=n[0],s=n[1],a=this._config.clickDots,r=0;r<a;r++)this._dotList.add(new i({x:o,y:s,xV:e(this._config.dotSpeedRange,100)*(Math.random()>.5?-1:1)/10,yV:e(this._config.dotSpeedRange,100)*(Math.random()>.5?-1:1)/10,r:e(this._config.dotRadius,100)}))}},{key:"resume",value:function(){var t=this;cancelAnimationFrame(this._animatingId);var e=function e(){t.clear(),t.render(),t._animatingId=requestAnimationFrame(e)};this._animatingId=requestAnimationFrame(e)}},{key:"suspend",value:function(){cancelAnimationFrame(this._animatingId)}},{key:"unload",value:function(){cancelAnimationFrame(this._animatingId),this.clear()}},{key:"update",value:function(t){var e=_slicedToArray(this._borders,4),i=e[0],n=e[1],o=e[2],s=e[3];if(t.x=t.x+t.xV,t.y=t.y+t.yV,t.x<s||t.x>n||t.y<i||t.y>o){if(this._dotList.delete(t),this._dotList.size>this._config.maxDots)return;this.addDot()}}},{key:"render",value:function(){var t=this,e=new Set,i=this._ctx;this._dotList.forEach(function(n){t.update(n),t._dotList.has(n)&&(i.beginPath(),i.moveTo(n.x,n.y),i.arc(n.x,n.y,n.r,0,2*Math.PI),i.closePath(),i.fillStyle="rgba("+t._config.style.dot.r+","+t._config.style.dot.g+","+t._config.style.dot.b+",1)",i.fill(),e.forEach(function(e){var o=Math.pow(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2),.5);o>t._config.dotLinkDistance||(i.beginPath(),i.moveTo(n.x,n.y),i.lineTo(e.x,e.y),i.closePath(),i.strokeStyle="rgba("+t._config.style.line.r+","+t._config.style.line.g+","+t._config.style.line.b+","+2*(1-o/t._config.dotLinkDistance)+")",i.lineWidth=t._config.style.width,i.stroke())}),e.add(n))})}},{key:"autoAddDot",value:function(t){var e=this,i=setInterval(function(){if(e._dotList.size>t)return void clearInterval(i);e.addDot()},this._config.createInterval)}},{key:"addDot",value:function(){var t=[e([0,this._ctxW]),e([0,this._ctxH]),e(this._config.dotSpeedRange,100)*(Math.random()>.5?-1:1)/10,e(this._config.dotSpeedRange,100)*(Math.random()>.5?-1:1)/10],n=t[0],o=t[1],s=t[2],a=t[3];switch(e([0,3])){case 0:o=0,a=Math.abs(a);break;case 1:n=this._ctxW,s=-Math.abs(s);break;case 2:o=this._ctxH,a=-Math.abs(a);break;case 3:n=0,s=Math.abs(s)}this._dotList.add(new i({x:n,y:o,xV:s,yV:a,r:e(this._config.dotRadius,100)}))}},{key:"setStyle",value:function(t){t=JSON.parse(JSON.stringify(t));for(var e in t)this._config.style[e]=t[e]}},{key:"setSize",value:function(){var t=this._ctx;t&&(this._ctxW=t.canvas.offsetWidth,this._ctxH=t.canvas.offsetHeight,t.canvas.width=this._ctxW,t.canvas.height=this._ctxH,this._borders=[0-this._config.borderExtend,this._ctxW+this._config.borderExtend,this._ctxH+this._config.borderExtend,0-this._config.borderExtend])}},{key:"clear",value:function(){this._ctx.clearRect(0,0,this._ctxW,this._ctxH)}}]),n}()});
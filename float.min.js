"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=function(){function e(e,t){var o=[],n=!0,a=!1,r=void 0;try{for(var i,d=e[Symbol.iterator]();!(n=(i=d.next()).done)&&(o.push(i.value),!t||o.length!==t);n=!0);}catch(e){a=!0,r=e}finally{try{!n&&d.return&&d.return()}finally{if(a)throw r}}return o}return function(t,o){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self.self===self&&self||"object"==("undefined"==typeof global?"undefined":_typeof(global))&&global.global===global&&global;"function"==typeof define&&define.amd?define([],function(){t.Float=e()}):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e():t.Float=e()}(function(){var e=Object.seal({dot_link:100,dot_v:[1,6],dot_click:3,dot_max:20,dot_create:500,dot_r:[.3,1.5],on_mousemove:!0,on_click:!0,extend_border:30,style:Object.seal({line:{r:255,g:255,b:255},width:.6,dot:{r:255,g:255,b:255,a:1}})}),t=e.style,o=void 0,n=void 0,a=void 0,r=void 0,i=void 0,d=void 0,c=void 0,f=function e(t){var o=t.x,n=void 0===o?0:o,a=t.y,r=void 0===a?0:a,i=t.v_x,d=void 0===i?0:i,c=t.v_y,f=void 0===c?0:c,l=t.r,s=void 0===l?0:l;_classCallCheck(this,e),this.x=n,this.y=r,this.v_x=d,this.v_y=f,this.r=s},l=function e(t,o){for(var n in o)o[n]instanceof Object?(t[n]=t[n]instanceof Object?t[n]:"[object Array]"===Object.prototype.toString.call(o[n])?[]:{},e(t[n],o[n])):t[n]=o[n]},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e instanceof Array?e[0]+Math.floor(Math.random()*((e[1]-e[0])*t+1))/t:e},u={init:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o=t.getContext("2d"),r=null,i=new Set,l(e,n),u.set_size(),u.bind_event(),u.auto_add_dot(e.dot_max),u.suspend(),u.resume()},bind_event:function(){var t=[];e.on_click&&t.push("click"),e.on_mousemove&&t.push("mousemove","mouseleave"),t.forEach(function(e){o.canvas.removeEventListener(e,u["on_"+e]),o.canvas.addEventListener(e,u["on_"+e])})},on_mousemove:function(e){var t=[e.offsetX,e.offsetY],o=t[0],n=t[1];return r?(r.x=o,void(r.y=n)):(r=new f({x:o,y:n}),void i.add(r))},on_mouseleave:function(e){i.delete(r),r=null},on_click:function(t){for(var o=[t.offsetX,t.offsetY],n=o[0],a=o[1],r=s(e.dot_click),d=0;d<r;d++)i.add(new f({x:n,y:a,v_x:s(e.dot_v,100)*(Math.random()>.5?-1:1)/10,v_y:s(e.dot_v,100)*(Math.random()>.5?-1:1)/10,r:s(e.dot_r,100)}))},resume:function(){cancelAnimationFrame(d);var e=function e(){u.clear(),u.render(),d=requestAnimationFrame(e)};d=requestAnimationFrame(e)},suspend:function(){cancelAnimationFrame(d)},update:function(t){var o=c,n=_slicedToArray(o,4),a=n[0],r=n[1],d=n[2],f=n[3];if(t.x=t.x+t.v_x,t.y=t.y+t.v_y,t.x<f||t.x>r||t.y<a||t.y>d){if(i.delete(t),i.size>e.dot_max)return;u.add_dot()}},render:function(){var n=new Set;i.forEach(function(a){u.update(a),i.has(a)&&(o.beginPath(),o.moveTo(a.x,a.y),o.arc(a.x,a.y,a.r,0,2*Math.PI),o.closePath(),o.fillStyle="rgba("+t.dot.r+","+t.dot.g+","+t.dot.b+",1)",o.fill(),n.forEach(function(n){var r=Math.pow(Math.pow(a.x-n.x,2)+Math.pow(a.y-n.y,2),.5);r>e.dot_link||(o.beginPath(),o.moveTo(a.x,a.y),o.lineTo(n.x,n.y),o.closePath(),o.strokeStyle="rgba("+t.line.r+","+t.line.g+","+t.line.b+","+2*(1-r/e.dot_link)+")",o.lineWidth=t.width,o.stroke())}),n.add(a))})},auto_add_dot:function(t){var o=setInterval(function(){return i.size>t?void clearInterval(o):void u.add_dot()},e.dot_create)},add_dot:function(){var t=[s([0,n]),s([0,a]),s(e.dot_v,100)*(Math.random()>.5?-1:1)/10,s(e.dot_v,100)*(Math.random()>.5?-1:1)/10],o=t[0],r=t[1],d=t[2],c=t[3];switch(s([0,3])){case 0:r=0,c=Math.abs(c);break;case 1:o=n,d=-Math.abs(d);break;case 2:r=a,c=-Math.abs(c);break;case 3:o=0,d=Math.abs(d)}i.add(new f({x:o,y:r,v_x:d,v_y:c,r:s(e.dot_r,100)}))},set_style:function(e){e=JSON.parse(JSON.stringify(e));for(var o in e)t[o]=e[o]},set_size:function(){o&&(n=o.canvas.offsetWidth,a=o.canvas.offsetHeight,o.canvas.width=n,o.canvas.height=a,c=[0-e.extend_border,n+e.extend_border,a+e.extend_border,0-e.extend_border])},clear:function(){o.clearRect(0,0,n,a)}};return u});
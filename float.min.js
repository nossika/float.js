!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Float=e()}(this,function(){"use strict";var t=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,s=void 0;try{for(var a,r=t[Symbol.iterator]();!(n=(a=r.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,s=t}finally{try{!n&&r.return&&r.return()}finally{if(o)throw s}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function t(e){var n=e.x,o=void 0===n?0:n,s=e.y,a=void 0===s?0:s,r=e.xV,c=void 0===r?0:r,h=e.yV,d=void 0===h?0:h,f=e.r,u=void 0===f?0:f;i(this,t),this.x=o,this.y=a,this.xV=c,this.yV=d,this.r=u};function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t[0]+Math.floor(Math.random()*((t[1]-t[0])*e+1))/e}return function(){function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,s),this._ctx=t.getContext("2d"),this._mouseDot=null,this._dotList=new Set,this._config=Object.seal({clickDots:3,maxDots:20,createInterval:500,dotRadius:[.3,1.5],dotSpeedRange:[1,6],dotLinkDistance:100,mousemoveEvent:!0,clickEvent:!0,borderExtend:30,style:Object.seal({line:{r:255,g:255,b:255},width:.6,dot:{r:255,g:255,b:255,a:1}})}),function t(e,i){for(var n in i)i[n]instanceof Object?(e[n]=e[n]instanceof Object?e[n]:"[object Array]"===Object.prototype.toString.call(i[n])?[]:{},t(e[n],i[n])):e[n]=i[n]}(this._config,e),this.setSize(),this.bindEvent(),this.autoAddDot(this._config.maxDots),this.suspend(),this.resume()}return e(s,[{key:"bindEvent",value:function(){var t=this,e=[];if(this._config.clickEvent&&e.push("click"),this._config.mousemoveEvent&&e.push("mousemove","mouseleave"),this._events)for(var i in this._events)this._ctx.canvas.removeEventListener(i,this._events[i]);this._events={},e.forEach(function(e){t._events[e]=t[e].bind(t),t._ctx.canvas.addEventListener(e,t._events[e])})}},{key:"mousemove",value:function(t){var e=[t.offsetX,t.offsetY],i=e[0],o=e[1];if(!this._mouseDot)return this._mouseDot=new n({x:i,y:o}),void this._dotList.add(this._mouseDot);this._mouseDot.x=i,this._mouseDot.y=o}},{key:"mouseleave",value:function(t){this._dotList.delete(this._mouseDot),this._mouseDot=null}},{key:"click",value:function(t){for(var e=[t.offsetX,t.offsetY],i=e[0],s=e[1],a=this._config.clickDots,r=0;r<a;r++)this._dotList.add(new n({x:i,y:s,xV:o(this._config.dotSpeedRange,100)*(Math.random()>.5?-1:1)/10,yV:o(this._config.dotSpeedRange,100)*(Math.random()>.5?-1:1)/10,r:o(this._config.dotRadius,100)}))}},{key:"resume",value:function(){var t=this;cancelAnimationFrame(this._animatingId);this._animatingId=requestAnimationFrame(function e(){t.clear(),t.render(),t._animatingId=requestAnimationFrame(e)})}},{key:"suspend",value:function(){cancelAnimationFrame(this._animatingId)}},{key:"unload",value:function(){cancelAnimationFrame(this._animatingId),this.clear()}},{key:"update",value:function(e){var i=t(this._borders,4),n=i[0],o=i[1],s=i[2],a=i[3];if(e.x=e.x+e.xV,e.y=e.y+e.yV,e.x<a||e.x>o||e.y<n||e.y>s){if(this._dotList.delete(e),this._dotList.size>this._config.maxDots)return;this.addDot()}}},{key:"render",value:function(){var t=this,e=new Set,i=this._ctx;this._dotList.forEach(function(n){t.update(n),t._dotList.has(n)&&(i.beginPath(),i.moveTo(n.x,n.y),i.arc(n.x,n.y,n.r,0,2*Math.PI),i.closePath(),i.fillStyle="rgba("+t._config.style.dot.r+","+t._config.style.dot.g+","+t._config.style.dot.b+",1)",i.fill(),e.forEach(function(e){var o=Math.pow(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2),.5);o>t._config.dotLinkDistance||(i.beginPath(),i.moveTo(n.x,n.y),i.lineTo(e.x,e.y),i.closePath(),i.strokeStyle="rgba("+t._config.style.line.r+","+t._config.style.line.g+","+t._config.style.line.b+","+2*(1-o/t._config.dotLinkDistance)+")",i.lineWidth=t._config.style.width,i.stroke())}),e.add(n))})}},{key:"autoAddDot",value:function(t){var e=this,i=setInterval(function(){e._dotList.size>t?clearInterval(i):e.addDot()},this._config.createInterval)}},{key:"addDot",value:function(){var t=[o([0,this._ctxW]),o([0,this._ctxH]),o(this._config.dotSpeedRange,100)*(Math.random()>.5?-1:1)/10,o(this._config.dotSpeedRange,100)*(Math.random()>.5?-1:1)/10],e=t[0],i=t[1],s=t[2],a=t[3];switch(o([0,3])){case 0:i=0,a=Math.abs(a);break;case 1:e=this._ctxW,s=-Math.abs(s);break;case 2:i=this._ctxH,a=-Math.abs(a);break;case 3:e=0,s=Math.abs(s)}this._dotList.add(new n({x:e,y:i,xV:s,yV:a,r:o(this._config.dotRadius,100)}))}},{key:"setStyle",value:function(t){for(var e in t=JSON.parse(JSON.stringify(t)))this._config.style[e]=t[e]}},{key:"setSize",value:function(){var t=this._ctx;t&&(this._ctxW=t.canvas.offsetWidth,this._ctxH=t.canvas.offsetHeight,t.canvas.width=this._ctxW,t.canvas.height=this._ctxH,this._borders=[0-this._config.borderExtend,this._ctxW+this._config.borderExtend,this._ctxH+this._config.borderExtend,0-this._config.borderExtend])}},{key:"clear",value:function(){this._ctx.clearRect(0,0,this._ctxW,this._ctxH)}}]),s}()});
